# 글로벌 규칙

## 일반 규칙
- 모든 응답은 한국어로 제공합니다.
- 코드와 기술적 용어는 영어로 유지합니다.
- 사용자 인터페이스의 일관성을 유지합니다.
- Markdown 파일, 코드 주석 등에서 `global_rules.md`를 참조하여 규칙을 준수합니다.

## 코드 스타일
- React 컴포넌트는 함수형으로 작성하고 PascalCase로 정의합니다.
- styled-components를 사용하여 스타일링합니다.
- CSS 클래스명은 camelCase를 사용합니다.
- 들여쓰기는 스페이스 2칸을 사용합니다.
- 미디어 쿼리는 utils/mediaQueries에서 가져옵니다.
- framer-motion을 사용하여 애니메이션을 구현합니다.
- 모든 컴포넌트에서 GlobalStyles.js의 전역 스타일 변수와 컴포넌트를 참조합니다.

## 언어 및 로컬라이제이션
- 기본 언어는 한국어입니다.
- 모든 UI 텍스트는 한국어로 표시합니다.
- 기술적 용어나 라이브러리 이름은 영어로 유지합니다.
- 다국어 지원 시 다음 규칙을 준수합니다:
    - 모든 UI 텍스트는 `src/locales` 디렉토리의 JSON 파일을 통해 관리합니다.
    - 키 이름 중복을 방지하기 위해 의미를 명확히 하는 네이밍 규칙을 사용합니다(예: fileUpload → fileUploadTitle).
    - 같은 키에 대해 문자열과 객체를 모두 값으로 설정하지 않습니다.
    - 번역이 필요한 항목이 발견되면 `ko.json`, `en.json`, `ja.json` 모두에 동일한 키로 추가합니다.
    - 지원하는 언어: 한국어(ko), 영어(en), 일본어(ja)

## 프로젝트 구조
- 컴포넌트는 `components/` 디렉토리에 저장합니다.
- 페이지 컴포넌트는 `pages/` 디렉토리에 저장합니다.
- 유틸리티 함수는 `utils/` 디렉토리에 저장합니다.
- 스타일 관련 파일은 `styles/` 디렉토리에 저장합니다.

## 공통 컴포넌트 규칙
- 재사용 가능한 컴포넌트는 최대한 모듈화하여 작성합니다.
- 공통 컴포넌트는 확장성과 유지보수성을 고려하여 설계합니다.

## 설정 및 환경
- Vite 기반 빌드 환경을 사용하며, 상대 경로 import를 권장합니다.
- 백엔드(Node.js/Express) 환경 설정은 `backend/.env` 파일을 사용하며, 다음 규칙을 따릅니다:
    - `.env` 파일은 Git 저장소에 포함하지 않습니다. (`.gitignore`에 `backend/.env` 추가)
    - 주요 환경 변수는 다음과 같습니다 (실제 값은 `.env` 파일에 정의):
        - `PORT`: 백엔드 서버 실행 포트 (예: `3001`)
        - `DB_HOST`: 데이터베이스 호스트 (예: `localhost`)
        - `DB_USER`: 데이터베이스 사용자명
        - `DB_PASSWORD`: 데이터베이스 비밀번호 
        - `DB_DATABASE`: 데이터베이스 이름
        - `SESSION_SECRET`: 세션 암호화를 위한 비밀 키 (강력하고 무작위적인 문자열로 설정)
        - `CLIENT_URL`: CORS 허용을 위한 클라이언트(프론트엔드) 주소 (예: `http://localhost:5173`)
        - `REDIS_HOST`: Redis 서버 호스트 (예: `127.0.0.1`)
        - `REDIS_PORT`: Redis 서버 포트 (예: `6379`)
    - 새로운 환경 변수 추가 시, 이 문서에도 해당 변수의 목적과 예시 값을 기록합니다.
    - `dotenv` 패키지를 사용하여 `server.js`에서 환경 변수를 로드합니다. (`require(\'dotenv\').config();`)
    - Google Cloud 서비스 (예: Gemini API) 인증은 사용자별로 데이터베이스(`users` 테이블의 `gemini_api_key` 컬럼)에 저장된 API 키를 사용합니다.
    - API 키는 `backend/services/APIKeyService.js`를 통해 안전하게 조회 및 복호화되어 사용됩니다.

## 에러 처리 및 사용자 경험
- 전역 예외 처리는 `ErrorController`로 일관된 피드백을 제공합니다. 
- 중복된 설명이나 중복된 UI 요소는 제거하여 사용자에게 명확한 정보를 제공합니다.

## 데이터베이스
- 데이터베이스 상호작용 시에는 `config/db.js`에 설정된 커넥션 풀(`pool` 객체)을 사용합니다.
- SQL 쿼리는 가독성을 위해 백틱(``)을 사용하여 여러 줄로 작성할 수 있습니다.
- 가능한 경우, SQL 인젝션 공격을 방지하기 위해 파라미터화된 쿼리(prepared statements)를 사용합니다.
